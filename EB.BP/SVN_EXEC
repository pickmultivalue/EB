* @(#) SVN_EXEC Ported to jBASE 07:23:52  18 FEB 2010
    FUNCTION SVN_EXEC(Args, Capturing)
    INCLUDE JBC.h
    shell = CHAR(255):'k'
    shellend = ' 2>&1'
    command = 'svn'
    noprompt = ' '; ! ' --non-interactive '
    command = 'git'
    sub_command = FIELD(Args, ' ', 1)
    new_Args = Args[COL2(), -1]
    BEGIN CASE
        CASE sub_command = 'info'
            sub_command = 'log'
            sub_command = 'rev-parse --show-toplevel'
        CASE sub_command = 'checkout'
            sub_command = 'add'
        CASE sub_command = 'revert'
            sub_command = 'checkout'
        CASE sub_command = 'delete'
            sub_command = 'rm'
            IF NOT(INDEX(Args, 'force', 1)) THEN
                sub_command := ' --cache '
            END
    END CASE

    IF sub_command # 'commit' THEN
        dir_dc = DCOUNT(new_Args, DIR_DELIM_CH)
        IF dir_dc > 1 THEN
            fileName = FIELD(new_Args, DIR_DELIM_CH, dir_dc)
            command = 'cd ':CONVERT(new_Args[1, COL1()-1], '/', DIR_DELIM_CH):' && ':command
            new_Args = fileName
        END
    END
    new_Args = sub_command:' ':new_Args
    cmd = command:noprompt:new_Args:shellend
    icmd = command:' ':new_Args

    IF Capturing THEN
        EXECUTE shell:cmd:shellend CAPTURING IO
        IF FIELD(Args, ' ', 1) # 'info' AND (INDEX(IO, 'rror', 1) OR INDEX(IO, 'failed', 1)) THEN
            INCLUDE EB.INCLUDES SVN_DEBUG
            svn_io = 'svn_':SYSTEM(18)
            EXECUTE shell:icmd:' > ':svn_io:shellend
            OPEN '.' THEN
                READ IO FROM svn_io THEN
                    DELETE svn_io
                END
            END
        END
        IO = CONVERT(IO, CHAR(13):CHAR(10), @AM)
        IO = CHANGE(IO, @AM:@AM, @AM)
        IO = TRIM(IO, @AM, 'T')
    END ELSE
        EXECUTE shell:icmd:shellend
        IO = ''
    END
    RETURN IO
